const nmml=e=>e.join("").replace(/\n/g,"\\n"),matml=String.raw,debug=!0,d={log:e=>{debug&&console.log(e)}};function parse(e,t,a=-1,s=-1){-1==a&&(a=document.getElementById(t).width,d.log("width blank, setting width to canvas width")),-1==s&&(s=document.getElementById(t).height,d.log("height blank, setting width to canvas height"));for(var i=e.split("\n").filter(e=>e),$=[`(async ()=>{m_package([media,mattexy,tex,example]);var img = new Image("${t}", ${a}, ${s});setGCTX(img);`],m=0;m<i.length;m++){var c=i[m].split(":::"),l=c[0],g=c[1].split(",,,");switch(l){case"mattex.delay":$.push(`await sleep(${g[0]})`);break;case"mattex.bg":$.push(`img.bg(new ColorDetails("${g[0]}", "${g[1]}"));`);break;case"mattex.clear":$.push("img.clear();");break;case"mattex.circle":$.push(`img.circle(${g[0]}, ${g[1]}, ${g[2]}, new ColorDetails("${g[3]}", "${g[4]}"), new Properties("${g[5]}"));`);break;case"mattex.rect":$.push(`img.rect(${g[0]},${g[1]},${g[2]},${g[3]}, new ColorDetails("${g[4]}", "${g[5]}"), new Properties("${g[6]}"));`);break;case"media.image":$.push(`img.image(${g[0]},${g[1]},${g[2]},${g[3]},"${g[4]}")`);break;case"mattex.tex":$.push(`img.tex(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]}, "${g[4]}")`);case"mattex.text":$.push(`img.text(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]}, "${g[4]}")`);case"mattex.s.tex":$.push(`img.s_tex(${g[0]}, ${g[1]}, ${g[2]}, "${g[3]}")`);case"mattex.s.text":$.push(`img.s_text(${g[0]}, ${g[1]}, ${g[2]}, "${g[3]}")`);case"mattex.click.sleep":$.push(`await click_sleep("${g[0]}");`)}}return $.push("})();"),$.join("\n")}